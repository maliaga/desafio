<app-breadcrumb [title]="'Carrito'" [breadcrumb]="'Carrito'"></app-breadcrumb>
<!-- section start -->
<section class="cart-section section-b-space">
    <div class="container">
        <div class="col-sm-12 empty-cart-cls text-center" *ngIf="!products.length">
            <img src="assets/images/icon-empty-cart.png" class="img-fluid mb-4">
            <h3><strong>Tu carrito esta vacio</strong></h3>
            <h4>Agrega tus productos :)</h4>
        </div>
        <div class="row" *ngIf="products.length">
            <div class="col-sm-12">
                <table class="table cart-table table-responsive-xs">
                    <thead>
                        <tr class="table-head">
                            <th scope="col">Imagen</th>
                            <th scope="col">Marca</th>
                            <th scope="col">Nombre producto</th>
                            <th scope="col">Precio</th>
                            <th scope="col">Cantidad</th>
                            <th scope="col">Total</th>
                        </tr>
                    </thead>
                    <tbody *ngFor="let product of newproducts">
                        <tr>
                            <td>
                                <a>
                                    <img width="100" [src]="product.productos[0]?.image ? 'https://'+product.productos[0]?.image : 'assets/images/product/placeholder.jpg'" [alt]="product.productos[0].description">
                                </a>
                            </td>
                            <td>
                                <a>{{ product.productos[0].brand | titlecase }}</a>
                            </td>
                            <td>
                                <a>{{ product.productos[0].description | titlecase }}</a>
                            </td>
                            <td>
                                <h2>
                                    ${{ product.productos[0].price | number }}
                                </h2>
                            </td>
                            <td>
                                <h2>
                                    <span class="btn-produc btn pointer" (click)="decrement(product.productos[0].id)">-</span>{{ product.productos.length}}<span class="btn-produc btn pointer" (click)="increment(product.productos[0].id)">+</span>
                                </h2>
                            </td>
                            <td>
                                <h2 class="td-color">
                                    ${{ (product.productos[0].price *product.productos.length | number) }}
                                </h2>
                            </td>
                        </tr>
                    </tbody>
                </table>
                <div class="discount">
                    <span class="success-color" *ngIf="responsestorage['applied-discount'].discount "> Se aplicó un descuento de ${{ responsestorage['applied-discount'].discount | number }} por haber comprado  ${{ responsestorage['applied-discount'].threshold | number }} de productos {{ responsestorage['applied-discount'].brand}}!”</span>
                    <br>
                    <span class="" *ngIf="responsestorage['best-discount'].discount "> Agrega ${{ responsestorage['best-discount'].threshold | number }}  más en productos {{ responsestorage['best-discount'].brand}} y aprovecha un descuento total de ${{ responsestorage['best-discount'].discount | number }} en tu compra!</span>
                </div>
                <table class="table cart-table table-responsive-md">
                    <tfoot>
                        <tr>
                            <td> Total :</td>
                            <td>
                                <h2> ${{ responsestorage.total | number }}</h2>
                            </td>
                        </tr>
                    </tfoot>
                </table>
            </div>
        </div>

        <div class="row cart-buttons" *ngIf='products.length'>
            <div class="col-6">
                <a [routerLink]="['/shop/tienda']" class="btn btn-solid">continuar comprando</a>
            </div>
        </div>
    </div>
</section>
<!--section end-->